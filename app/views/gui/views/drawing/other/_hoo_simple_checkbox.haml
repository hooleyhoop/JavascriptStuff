-# View should be logicless
-# No Dimensions in CSS
-# If you don't have Javascript you dont need rollovers
-# Javascript-less site should be minimal and semantic

-# http://0.0.0.0:3000/widgets/simpleCheckbox?initialState=1

- push( hoo_simple_checkbox )

%div[_]( data-jsclass='HooSimpleCheckbox' style="" )
	= form_tag( '', :method=>:post, :remote=>true ) do
		%span.sansSolidBold #{_.label}
		%input( type="checkbox" name="c1" )



- if( _.includeOnce? )
	:javascript

		HooSimpleCheckbox = HooWidget.extend({

			_mouseClickAction:	undefined,
			_checkbox:			undefined,

			init: function( /* init never has args */ ) {
				arguments.callee.base.apply(this,arguments);

				this._checkbox = $( "#"+this.id+" form input:checkbox:first" );

				var self = this;

				// set up actions as configured in the json - mixin?
				if( this.json.javascriptActions )
				{
					if( this.json.javascriptActions.mouseClick )
					{
						setTimeout( function(){
							var target	= window[ self.json.javascriptActions.mouseClick.action_taget ];
							var action	= target[ self.json.javascriptActions.mouseClick.action_event ];
							var arg		= self.json.javascriptActions.mouseClick.action_arg;
							self._mouseClickAction = { t:target, a:action, w:arg };

							self._checkbox.change(function(e) {
								self._mouseClickAction.a.call( self._mouseClickAction.t, self._mouseClickAction.w );
							});

						}, 10);
					}
				}
			}

		});
