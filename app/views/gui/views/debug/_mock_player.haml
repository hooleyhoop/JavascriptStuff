- push( mock_player )

%div[_]( data-jsclass='Mock_Player' style="font-size:15px; background-color: red;" )
	%span Not ready

-# Obviously we cannot leave this here as it is crazy to include it more than once
- if( _.includeOnce? )
	:javascript

		// Obviously, we only do this if there is a bloomin canvas in the first place. Oh, hello ie
		Mock_Player = HooWidget.extend({

			_ready:		false,
			_duration:	0,
			_loadedValue: 0,
			_playedValue: 0,
			textHolder: "span",

			init: function( /* init never has args */ ) {
				arguments.callee.base.apply(this,arguments);
					var self = this;
					setTimeout( function(){
						self.set('_ready', true );
						self.setContentText("I am now officially ready!");

						self.startLoading();
					}, 1000);
				//}
			},

			startLoading: function() {

				var self = this;
				setInterval( function() {
					self.set('_loadedValue', self._loadedValue+1 );
				},1000.0/25.0);

				setTimeout( function() {
					self.set('_duration', 120 );
					self.startPlaying();
				},1000.0);
			},

			startPlaying: function() {

				var self = this;
				setInterval( function() {
					self.set('_playedValue', self._playedValue+1 );
				},1000.0/25.0);
			},

			setContentText:  function( arg ) {
				var $span = $( "#"+this.id+" span:first" );
				$span.text( arg );
			},

			setProgressPercent: function( arg ) {
				console.log("oh my, "+ arg );
			}
		});

